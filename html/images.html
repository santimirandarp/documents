<html>

  <head>
    <link rel="stylesheet" href="index.css">
  </head>

  <body>
    <main>
      <div style='text-align:center;'>
        <h1 id="images">Images</h1>
        <span>Loading, Best Practices, Theory </span>
      </div>

      <h2>Brief</h2>
      <p>Store locally, use <b>alt</b> attribute, width and height whenever possible. Background-images for non-content/decorative images.</p>

      <h2>Loading</h2>
      <p>In the most straightforward approach images can be loaded using</p>
      <code>&lt;img src='path/to/images/sourceImage.format'&gt;</code>

      <h2>Best Practices</h2>
      <dl>
        <dt>On Storage</dt>
        <dd>Store under <em>/images</em> folder. Also use <em>descriptive_filename</em>.
        This optimizes <abbr title="Search Engine Optimization">SEO</abbr> (and we get more views).</dd>
        <dd>
        Store Locally, i.e  on the same server than the website, and avoid using external urls.
        Use external links is prone to links breaks or modified images. Also a DNS search + GET takes more time to load the image.
        </dd>
        <dd>If an external image is used, be it on the public domain.
        example picsum.photos/h/w?random </dd>
        <dt>Use <code>alt</code> attribute. Text is useful for
        users with:</dt>
        <dd>impaired vision</dd>
        <dd>turned off images (ex. in many phones) </dd>
        <dd>text-only browsers as Lynx</dd> 
        <dd>search engines</dd>
        <dt> Background-image</dt>
        <dd>When images do not add to the content use background images. 
        Also those do not need to be described (as with alt).</dd>
        <dd>if really need to include decorative &lt;img&gt; use alt=&#39;&#39;</dd>
      </dl>
      <h3>About the <em>alt</em> attribute</h3>
      <ul>
        <li>alt attribute is required for validation
          (use html validator) </li>
        <li>images inside links add border:0 (to prevent IE9 and earlier
          of displaying a border)</li>
      </ul>

      <h2>Displaying (or not) Images</h2>
      <p>One solution (probably not implemented in all browsers) is to include inline height and width and also any kind of css to make it responsive. If the image fails loading, a proper space will be shown.</p>
      <p>It works like this: browsers use width and height to calculate a ratio, and that's gonna be used into the css, and will always look fine. Height has to be auto.</p>

      <h3>A few advices</h3>
      <ul>
        <li>width and height to avoid flickering and reserve space</li>
        <li>The <b>figure</b> element can be used for set of different images (art direction)</li>
        <li>Minify the images to reduce load time + data-transfer.</li>
      </ul>

      <h2>srcset and sizes attributes</h2>
      <p>In the bare minimum and image loading should look like this:
      <code>&lt;img alt='description' width='300' height='400' src='path/to/images/pic' &bg;</code></p>
      <p>Common computer-screen resolutions are 72dpi. An image should be displayed on its <b>natural size</b> (area covered by its number of pixels).  Why? Too big sizes make it grainy, too small (if too small) waste bandwidth and increase load time. It's ok to strech/shrink but avoiding extremes. <em>srcset</em> attribute 
      allows us to include more than one image.</p>
      <!-- In case of having a set of images we should try to edit them properly to the same size, or at least same ratio. -->
      <p> This is where srcset attribute comes into play. We specify filename and its intrinsic width in pixels <b> but using w</b> like so: </p>
      <pre>
          <code>&lt; img srcset="elva-fairy-480w.jpg 480w,
            elva-fairy-800w.jpg 800w"
            src="elva-fairy-800w.jpg" alt="Elva dressed as a fairy"&gt;
          </code>
      </pre>
      <p>
      It loads 480 for small viewports, 800 for bigger ones. Because the size (of the slot) as per default is 
      100vw.
      </p>
      <p>But let's say the 480w want to be displayed for less than 600px devices. We can use sizes with a media query and a slot width:
      </p>
      <pre>
          <code>&lt; img srcset="elva-fairy-480w.jpg 480w,
            elva-fairy-800w.jpg 800w"
            sizes="(max-width: 600px) 480px,
            800px"
            src="elva-fairy-800w.jpg" alt="Elva dressed as a fairy" &gt;
          </code>
      </pre>
      <p>So the browser look which image fills the slot.</p>
      <p>In different density devices, it 
      says something like this: we need to fill 480vw then if the pixel density is 2 480w is not enough because there are 960 pixels. The best choice here is 800w.  
      </p>
      <p> So pixel density acts selecting an image from the srcset 
      after multiplying it by the density</p>
      <p> From MDN:</p>
      <blockquote>So, with these attributes in place, the browser will:
        <ul>
          <li>		     Look at its device width</li>
          <li>Work out which media condition in the sizes list is the first one to be true</li>
          <li>Look at the slot size given to that media query</li>
          <li>Load the image referenced in the srcset list that most closely matches the chosen slot size</li>
        </ul> 
      </blockquote>
      <h3>Tip</h3>
      <p>Always specify the width when using sizes attribute or the image will take the sizes' slot size.  </p>

      <h2>Example Case</h2>
      <p>Let's say we want to upload a 1500px square image, and make it available for retina displays and responsive.</p>
      <p>We could <code>.image {width:100%; /*height:auto; is default*/}</code> for responsiveness. But yet it loses resolution when stretching out or 
      wastes bandwidth when shrinking in. We can add <em>srcset</em> and upload diff sizes for different densities. </p>
      <!--be careful not altering the aspect ratio of the image -->

      <h2>Control Of Backgrounds</h2>
      <p>Backgrounds can be selectively included using media queries.</p>
      <p>To check which images are loaded (transferred from the server) always look at the network monitor tab in the dev tools</p>

      <h2>Object Fit </h2>
      <p>Let's say we want an image fill a 200x150 pixel box. It's probably more useful with vw, vh.
      If we do <code>.parent{width:200px; height:150px;}</code> and <code>.img{width:100%; height:100%}</code> it solves the issue but the image's aspect ratio is probably changed. A solution is to use object-fit:cover|contain. The values being self-explanatory.
      </p>
      <p>
      The previous example is fixed like:
      <pre>
      <code>
.parent{width:200px; height:150px;}
.img{width:100%; height:100%; object-fit:cover;}
      </code>
      </pre>
      And *This is Important* the width,height values are absolutely necessary
      (it doesn't take effect otherwise.)
      </p>
      <p>
      Replaced Elements behave different in grid and flex layouts.
      They don't stretch as per default. They are aligned to the start.
      They could be stretched using the next css though.
      </p>
      <pre>
      <code>
      img { width: 100%; height: 100%; }
      </code>
      </pre>
      <p>But this changes the aspect ratio, so we could add object-fit!  </p>
    </main>

  </body>
</html>
