# Networks
There are 2 network managers installed by default in ubuntu:
- Network Manager: `/lib/systemd/system/Network-Manager.service`
- systemd-networkd: `/lib/systemd/system/systemd-networkd.service`

We can run as a service from systemd.

We can consult and set some properties using clients: 
* systemd-networkd may be introspected and controlled at runtime
       using networkctl
* for NetworkManager is nm-cli. There is a gui also (nm-connection-editor).

**netplan** is really good. It allows to configure any (even both) of those backends, and many network properties using a YAML file. For example:
```
#/etc/netplan/this.yaml
network:
  version: 2
  renderer: networkd
  ethernets:
    enp0s1:
      dhcp4: true # this or the next 2 lines, not both
      addresses:
        - 192.168.0.100/24
      gateway4: 192.168.0.1
      nameservers: 
        search: [example.com, another.com]
        addresses: [1.2.1.1, 8.8.8.8]
```

## Network Tools
Configure our local network interfaces:

* ifconfig
Example:
ifconfig eth0 192.168.1.5 netmask 255.255.255.0 up
* route: for the default gateway
route add default gw 192.168.1.1

* `ip` is more complete, but changes aren't permanent

```
ip addr show === ifconfig a # for all

ip addr show enp2s0 === ifconfig enp2s0 # Or short output:

ip link set <iface> up / ip link set <iface> down

ip route show
```

* netplan: permanent changes can be made using netplan. Example:
```  
network:
  ethernets:
      eno1:
          addresses: [192.168.1.13/24]
          gateway4: 192.168.1.1
          dhcp4: true
          optional: true
          nameservers:
              addresses: [8.8.8.8,8.8.4.4]
  version: 2

# and run this 2
sudo netplan --debug generate
sudo netplan apply
```

